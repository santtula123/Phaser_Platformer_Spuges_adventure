LoadGame={},LoadGame.Game=function(t){},LoadGame.Game.prototype={init:function(){this.input.maxPointers=2},preload:function(){this.game.add.text(240,340,"Ladataan...",{font:"70px Sans",fontStyle:"bold",fill:"#ffffff"}),this.game.load.tilemap("map1","assets/map/map1.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.tilemap("map2","assets/map/map2.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.tilemap("boss","assets/map/boss.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.atlasJSONHash("Atlas","assets/Atlas.png","assets/Atlas.json"),this.game.load.image("16x16","assets/16x16.png"),this.game.load.audio("coinSound","assets/Sounds/coin.ogg"),this.game.load.audio("jumpSound","assets/Sounds/jump.ogg"),this.game.load.audio("deadSound","assets/Sounds/dead.ogg"),this.game.load.audio("mysterySound","assets/Sounds/mystery.ogg"),this.game.load.audio("teleSound","assets/Sounds/tele.ogg"),this.game.load.audio("bottleDeadSound","assets/Sounds/bottleDead.ogg"),this.game.load.audio("bossNoHit","assets/Sounds/bossNoHit.ogg"),this.game.load.audio("bossBackground","assets/Sounds/bossBackground.ogg"),this.game.load.audio("8BITTIGAMEMUSICA","assets/Sounds/8BITTIGAMEMUSICA.ogg")},create:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.state.start("Start")}},StartGame={},StartGame.Game=function(t){},StartGame.Game.prototype={create:function(){this.sky=this.game.add.tileSprite(0,0,800,640,"Atlas","sky.png"),this.game.add.text(140,140,"Spugen Seikkailu",{font:"70px Sans",fontStyle:"bold",fill:"#ffffff"}),this.button=this.game.add.button(this.game.world.centerX-150,300,"Atlas",this.start,this,"PlayButton.png","PlayButton.png","PlayButton.png"),this.button=this.game.add.button(this.game.world.centerX-150,450,"Atlas",this.showHelp,this,"HelpButton.png","HelpButton.png","HelpButton.png"),this.insGrp=this.game.add.group(),this.ins=this.game.add.sprite(112,120,"Atlas","help.png"),this.backButton=this.game.add.sprite(690,70,"Atlas","BackButton.png"),this.backButton.inputEnabled=!0,this.backButton.anchor.setTo(.5,.5),this.backButton.events.onInputDown.add(this.hideHelp,this),this.game.add.tween(this.backButton.scale).to({x:.95,y:.95},1e3,Phaser.Easing.Linear.None,!0,0,1e3,!0),this.insGrp.add(this.ins),this.insGrp.add(this.backButton),this.insGrp.alpha=0},start:function(){this.game.state.start("Game")},showHelp:function(){this.game.add.tween(this.insGrp).to({alpha:1},1e3,Phaser.Easing.none,!0),this.ins.inputEnabled=!0,this.ins.events.onInputDown.add(this.hideHelp,this)},hideHelp:function(){this.ins.inputEnabled=!1,this.game.add.tween(this.insGrp).to({alpha:0},1e3,Phaser.Easing.none,!0)}},BasicGame={score:0,stateStartScore:0,highScore:0,life:3,gameWin:!1},BasicGame.Game=function(t){this.game=t,this.map=new BasicGame.Map("8BITTIGAMEMUSICA",.2,"map1",this.game),this.tele=new BasicGame.Tele(6208,464,"Game2",this.game),this.mystery=new BasicGame.Mystery(this.map,this.game),this.texts=new BasicGame.Texts(this.game),this.coins=new BasicGame.Coins(this.game,this.map),this.player=new BasicGame.Player(!0,this.game),this.enemy=new BasicGame.Enemy(this.game,this.map),this.enemyFlying=new BasicGame.EnemyFlying(this.game,this.map)},BasicGame.Game.prototype={create:function(){BasicGame.score=BasicGame.stateStartScore,this.map.create(),this.tele.create(this.map.backgroundMusic),this.mystery.create(),this.texts.create(),this.coins.create(),this.player.create(),this.enemy.create(this.map.backgroundMusic),this.enemyFlying.create(this.map.backgroundMusic)},update:function(){this.tele.update(this.player.sprite),this.mystery.update(this.player.sprite),this.texts.update(),this.coins.update(this.player.sprite),this.player.update(this.map.layer1),this.enemy.update(this.player.sprite),this.enemyFlying.update(this.player.sprite)}},BasicGame2={},BasicGame2.Game=function(t){this.game=t,this.map=new BasicGame.Map("8BITTIGAMEMUSICA",.2,"map2",this.game),this.tele=new BasicGame.Tele(6288,576,"Boss",this.game),this.mystery=new BasicGame.Mystery(this.map,this.game),this.texts=new BasicGame.Texts(this.game),this.coins=new BasicGame.Coins(this.game,this.map),this.player=new BasicGame.Player(!0,this.game),this.enemy=new BasicGame.Enemy(this.game,this.map),this.enemyFlying=new BasicGame.EnemyFlying(this.game,this.map)},BasicGame2.Game.prototype={create:function(){BasicGame.score=BasicGame.stateStartScore,this.map.create(),this.tele.create(this.map.backgroundMusic),this.mystery.create(),this.texts.create(),this.coins.create(),this.player.create(),this.enemy.create(this.map.backgroundMusic),this.enemyFlying.create(this.map.backgroundMusic)},update:function(){this.tele.update(this.player.sprite),this.mystery.update(this.player.sprite),this.texts.update(),this.coins.update(this.player.sprite),this.player.update(this.map.layer1),this.enemy.update(this.player.sprite),this.enemyFlying.update(this.player.sprite)}},BossGame={},BossGame.Game=function(t){this.game=t,this.map=new BasicGame.Map("bossBackground",1,"boss",this.game),this.texts=new BasicGame.Texts(this.game),this.player=new BasicGame.Player(!1,this.game),this.boss=new BasicGame.Boss(650,300,600,this.game)},BossGame.Game.prototype={create:function(){BasicGame.score=BasicGame.stateStartScore,this.map.create(),this.texts.create(),this.player.create(),this.boss.create(this.map.backgroundMusic)},update:function(){this.texts.update(),this.player.update(this.map.layer1),this.boss.update(this.map.layer1,this.player.sprite)}},EndGame={},EndGame.Game=function(t){},EndGame.Game.prototype={create:function(){if(BasicGame.gameWin===!1?this.game.add.text(80,80,"Game over",{font:"50px Arial",fill:"#ffffff"}):this.game.add.text(80,80,"Voitit Pelin!!!",{font:"50px Arial",fill:"#ffffff"}),this.game.add.text(80,150,"Pisteet: "+BasicGame.score,{font:"50px Arial",fill:"#ffffff"}),this.game.add.text(80,200,"Ennätyspisteet: "+BasicGame.highScore,{font:"50px Arial",fill:"#ffffff"}),BasicGame.score>BasicGame.highScore){this.game.add.text(80,300,"Uusi Ennätys!!!",{font:"50px Arial",fill:"#ffffff"});var t=JSON.stringify(BasicGame.score);localStorage.setItem("spugeHighscore",t)}this.button=this.game.add.button(350,500,"Atlas",this.restart,this,"button_jump_0.png","button_jump_1.png","button_jump_0.png"),this.game.add.text(80,400,'Paina "R" näppäintä tai punaista ympyrää uudelleenkäynnistääksesi pelin',{font:"20px Arial",fill:"#ffffff"}),this.player=this.game.add.sprite(580,200,"Atlas","sp6.png"),this.player.scale.setTo(2,2),this.player.anchor.setTo(.5,1),this.player.animations.add("playerDead",["sp6.png","sp7.png","sp8.png"],7,!0),this.player.animations.play("playerDead"),BasicGame.score=0,BasicGame.life=3,BasicGame.stateStartScore=0,BasicGame.gameWin=!1;var e=this.game.input.keyboard.addKey(Phaser.Keyboard.R);e.onDown.addOnce(this.restart,this)},update:function(){this.player.angle+=1},restart:function(){this.game.state.start("Game")}},BasicGame.Boss=function(t,e,i,s){this.x=t,this.y=e,this.distance=i,this.game=s,this.sprite=null},BasicGame.Boss.prototype={create:function(t){this.spriteLives=3,this.hitTimer=this.game.time.time,this.facing="right",this.sprite=this.game.add.sprite(this.x,this.y,"Atlas","b6.png"),this.sprite.animations.add("left",["b6.png","b7.png","b8.png","b9.png","b10.png","b11.png"],9,!0),this.sprite.animations.add("right",["b0.png","b1.png","b2.png","b3.png","b4.png","b5.png"],9,!0),this.game.physics.enable(this.sprite),this.sprite.body.gravity.y=250,this.sprite.body.bounce.y=.7,this.sprite.x=this.x,this.previous_x=this.sprite.x,this.sprite.body.velocity.x=-175,this.deadSound=this.game.add.sound("deadSound"),this.bottleDeadSound=this.game.add.sound("bottleDeadSound"),this.bossNoHit=this.game.add.sound("bossNoHit"),this.backgroundMusic=t},update:function(t,e){this.game.physics.arcade.collide(this.sprite,t),this.game.physics.arcade.collide(this.sprite,e,this.hitEnemy,null,this),this.sprite.body.velocity.x<=1?this.facing="left":this.facing="right",this.sprite.animations.play(this.facing),Math.abs(this.sprite.x-this.previous_x)>=this.distance&&(this.sprite.body.velocity.x*=-1,this.previous_x=this.sprite.x),this.sprite.body.onFloor()&&(this.sprite.body.velocity.y=-Math.floor(500*Math.random()+100))},hitEnemy:function(t,e){t.body.touching.up&&this.game.time.time>this.hitTimer?(this.hitTimer=this.game.time.time+3e3,this.bottleDeadSound.play(),e.body.velocity.y=-300,this.spriteLives-=1,this.spriteLives<=0&&(this.backgroundMusic.destroy(),BasicGame.gameWin=!0,this.game.state.start("End"))):t.body.touching.up&&this.game.time.time<=this.hitTimer?(this.bossNoHit.play(),e.body.velocity.y=-500):(this.backgroundMusic.destroy(),this.deadSound.play(),this.game.state.restart("Boss"),BasicGame.life-=1,BasicGame.life<=0&&(BasicGame.gameWin=!1,this.game.state.start("End")))}},BasicGame.Coins=function(t,e){this.game=t,this.map=e},BasicGame.Coins.prototype={create:function(){this.coins=this.game.add.group(),this.coins.enableBody=!0,this.map.mapp.createFromObjects("Coin",34,"Atlas",0,!0,!1,this.coins),this.coins.callAll("animations.add","animations","spin",["0.png","1.png","2.png","3.png","4.png","5.png"],10,!0),this.coins.callAll("animations.play","animations","spin"),this.coinSound=this.game.add.audio("coinSound")},update:function(t){this.game.physics.arcade.overlap(t,this.coins,this.collectCoin,null,this)},collectCoin:function(t,e){e.kill(),this.coinSound.play(),BasicGame.score+=1}},BasicGame.Enemy=function(t,e){this.game=t,this.map=e,this.sprite=null},BasicGame.Enemy.prototype={create:function(t){this.sprite=this.game.add.group(),this.map.mapp.createFromObjects("Enemy",34,"Atlas","bottle.png",!0,!1,this.sprite),this.sprite.forEach(function(t){this.game.physics.enable(t),t.body.velocity.x=-50,t.previous_x=t.x},this),this.deadSound=this.game.add.sound("deadSound"),this.bottleDeadSound=this.game.add.sound("bottleDeadSound"),this.backgroundMusic=t},update:function(t){this.sprite.forEach(function(e){this.game.physics.arcade.overlap(e,t,this.hitEnemy,null,this),Math.abs(e.x-e.previous_x)>=e.distance&&(e.body.velocity.x*=-1,e.previous_x=e.x)},this)},hitEnemy:function(t,e){!t.body.touching.up||t.body.touching.right&&t.body.touching.left?(this.backgroundMusic.destroy(),this.deadSound.play(),this.game.state.restart("Game"),BasicGame.life-=1,BasicGame.life<=0&&this.game.state.start("End")):(t.kill(),this.bottleDeadSound.play(),BasicGame.score+=1)}},BasicGame.EnemyFlying=function(t,e){this.game=t,this.map=e,this.sprite=null},BasicGame.EnemyFlying.prototype={create:function(t){this.sprite=this.game.add.group(),this.map.mapp.createFromObjects("EnemyFly",34,"Atlas","enemyFl.png",!0,!1,this.sprite),this.sprite.forEach(function(t){t.anchor.set(.5),this.game.physics.enable(t),t.body.moves=!1},this),this.deadSound=this.game.add.sound("deadSound"),this.backgroundMusic=t},update:function(t){this.sprite.forEach(function(e){this.game.physics.arcade.overlap(e,t,this.hitFlyEnemy,null,this),e.rotation+=.05},this)},hitFlyEnemy:function(t){this.backgroundMusic.destroy(),this.deadSound.play(),this.game.state.restart("Game"),BasicGame.life-=1,BasicGame.life<=0&&this.game.state.start("End")}},BasicGame.Map=function(t,e,i,s){this.game=s,this.music=t,this.volume=e,this.level=i,this.mapp=null},BasicGame.Map.prototype={create:function(){this.sky=this.game.add.tileSprite(0,0,800,640,"Atlas","sky.png"),this.sky.fixedToCamera=!0,this.mapp=this.game.add.tilemap(this.level),this.mapp.addTilesetImage("16x16"),this.layer1=this.mapp.createLayer("Tile Layer 1"),this.layer1.renderSettings.enableScrollDelta=!1,this.layer2=this.mapp.createLayer("Tile Layer 2"),this.layer2.renderSettings.enableScrollDelta=!1,this.layer1.resizeWorld(),this.mapp.setCollisionBetween(1,250,!0,this.layer1),this.backgroundMusic=this.game.add.audio(this.music),this.backgroundMusic.loop=!0,this.backgroundMusic.volume=this.volume,this.backgroundMusic.play()}},BasicGame.Mystery=function(t,e){this.map=t,this.game=e,this.sprite=null},BasicGame.Mystery.prototype={create:function(){this.mystery=this.game.add.group(),this.mystery.enableBody=!0,this.map.mapp.createFromObjects("Mystery",34,"Atlas","question_1.png",!0,!1,this.mystery),this.mystery.forEach(function(t){t.body.checkCollision.left=!1,t.body.checkCollision.right=!1,t.body.checkCollision.up=!1},this),this.mystery.callAll("animations.add","animations","mysteryMove",["question_1.png","question_2.png","question_3.png"],8,!0),this.mystery.callAll("animations.play","animations","mysteryMove"),this.mysterySound=this.game.add.sound("mysterySound")},update:function(t){this.mystery.forEach(function(e){this.game.physics.arcade.collide(e,t)&&e.body.touching.down&&this.collectCoin(e,t)},this)},collectCoin:function(t,e){t.kill(),this.mysterySound.play(),BasicGame.score+=5}},BasicGame.Player=function(t,e){this.game=e,this.cameraFollow=t,this.sprite=null},BasicGame.Player.prototype={create:function(){this.facing="left",this.jumpTimer=0,this.sprite=this.game.add.sprite(100,200,"Atlas","sp6.png"),this.sprite.animations.add("left",["sp3.png","sp4.png","sp5.png"],9,!0),this.sprite.animations.add("turn",["sp6.png"],20,!0),this.sprite.animations.add("right",["sp0.png","sp1.png","sp2.png"],9,!0),this.game.physics.enable(this.sprite),this.sprite.body.gravity.y=250,this.sprite.body.bounce.y=.5,this.cameraFollow===!0&&this.game.camera.follow(this.sprite),this.cursors=this.game.input.keyboard.createCursorKeys(),this.jumpButton=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),left=!1,right=!1,jump=!1,this.buttonjump=this.game.add.button(660,540,"Atlas",null,this,"button_jump_0.png","button_jump_1.png","button_jump_0.png"),this.buttonjump.fixedToCamera=!0,this.buttonjump.events.onInputOver.add(function(){jump=!0}),this.buttonjump.events.onInputOut.add(function(){jump=!1}),this.buttonjump.events.onInputDown.add(function(){jump=!0}),this.buttonjump.events.onInputUp.add(function(){jump=!1}),this.buttonleft=this.game.add.button(0,550,"Atlas",null,this,"Button_move01.png","Button_move02.png","Button_move01.png"),this.buttonleft.fixedToCamera=!0,this.buttonleft.events.onInputOver.add(function(){left=!0}),this.buttonleft.events.onInputOut.add(function(){left=!1}),this.buttonleft.events.onInputDown.add(function(){left=!0}),this.buttonleft.events.onInputUp.add(function(){left=!1}),this.buttonright=this.game.add.button(160,550,"Atlas",null,this,"Button_move01.png","Button_move02.png","Button_move01.png"),this.buttonright.fixedToCamera=!0,this.buttonright.events.onInputOver.add(function(){right=!0}),this.buttonright.events.onInputOut.add(function(){right=!1}),this.buttonright.events.onInputDown.add(function(){right=!0}),this.buttonright.events.onInputUp.add(function(){right=!1}),this.jumpSound=this.game.add.audio("jumpSound")},update:function(t){this.game.physics.arcade.collide(this.sprite,t),this.sprite.body.velocity.x=0,this.cursors.left.isDown||left?(this.sprite.body.velocity.x=-150,"left"!==this.facing&&(this.sprite.animations.play("left"),this.facing="left")):this.cursors.right.isDown||right?(this.sprite.body.velocity.x=150,"right"!==this.facing&&(this.sprite.animations.play("right"),this.facing="right")):"idle"!==this.facing&&(this.sprite.animations.stop(),"left"===this.facing?this.sprite.frame="sp6.png":this.sprite.frame="sp7.png",this.facing="idle"),(this.jumpButton.isDown||jump)&&this.sprite.body.onFloor()&&this.game.time.time>this.jumpTimer&&(this.sprite.body.velocity.y=-350,this.jumpSound.play(),this.jumpTimer=this.game.time.time+750),this.game.input.activePointer.isMouse||(right=!1,left=!1,jump=!1)}},BasicGame.Tele=function(t,e,i,s){this.x=t,this.y=e,this.game=s,this.nextLevel=i,this.sprite=null},BasicGame.Tele.prototype={create:function(t){this.timer=this.game.time.time,this.sprite=this.game.add.sprite(this.x,this.y,"Atlas","tele1.png"),this.game.physics.arcade.enable(this.sprite),this.sprite.body.moves=!1,this.sprite.animations.add("teleMove",["tele1.png","tele2.png","tele3.png"],9,!0),this.sprite.animations.play("teleMove"),this.teleSound=this.game.add.audio("teleSound"),this.backgroundMusic=t},update:function(t){this.game.time.time>this.timer&&(this.game.physics.arcade.overlap(this.sprite,t,this.changeState,null,this),this.timer=this.game.time.time+400)},changeState:function(t){this.backgroundMusic.destroy(),BasicGame.stateStartScore=BasicGame.score,this.teleSound.play(),this.game.state.start(this.nextLevel)}},BasicGame.Texts=function(t){this.game=t},BasicGame.Texts.prototype={create:function(){this.timer=this.game.time.time,this.scoreText=this.game.add.text(16,16,"Pisteet: "+BasicGame.score,{fontSize:"32px",fill:"#FFFFFF"}),this.scoreText.fixedToCamera=!0,null!==localStorage.getItem("spugeHighscore")&&(BasicGame.highScore=JSON.parse(localStorage.getItem("spugeHighscore"))),this.HighscoreText=this.game.add.text(340,16,"Ennätyspisteet: "+BasicGame.highScore,{fontSize:"32px",fill:"#FFFFFF"}),this.HighscoreText.fixedToCamera=!0,this.lifeText=this.game.add.text(660,16,"Elämä: "+BasicGame.life,{fontSize:"32px",fill:"#FFFFFF"}),this.lifeText.fixedToCamera=!0},update:function(){this.game.time.time>this.timer&&(this.scoreText.text="Pisteet: "+BasicGame.score,this.timer=this.game.time.time+500)}},function(){var t=new Phaser.Game(800,640,Phaser.AUTO,"game");t.state.add("Load",LoadGame.Game),t.state.add("Start",StartGame.Game),t.state.add("Boss",BossGame.Game),t.state.add("Game",BasicGame.Game),t.state.add("Game2",BasicGame2.Game),t.state.add("End",EndGame.Game),t.state.start("Load")}();